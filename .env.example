# ATLASSIAN INTEGRATION (Required)
# Get API token from: https://id.atlassian.com/manage-profile/security/api-tokens
ATLASSIAN_API_TOKEN=your-atlassian-api-token-here
JIRA_BASE_URL=https://yourcompany.atlassian.net
CONFLUENCE_BASE_URL=https://yourcompany.atlassian.net/wiki
ATLASSIAN_EMAIL=your-email@yourcompany.com

GOOGLE_SERVICE_ACCOUNT_EMAIL=calendar-bot@cloudedev.iam.gserviceaccount.com
GOOGLE_SERVICE_ACCOUNT_KEY_JSON='{
  "type": "service_account",
  "project_id": "project_id",
  "private_key_id": "private_key_id",
  "private_key": "private_key",
  "client_email": "client_email",
  "client_id": "client_id",
  "auth_uri": "auth_uri",
  "token_uri": "token_uri",
  "auth_provider_x509_cert_url": "auth_provider_x509_cert_url",
  "client_x509_cert_url": "client_x509_cert_url",
  "universe_domain": "universe_domain"
}'

# Optional: Share created calendars with this user email
CALENDAR_OWNER_EMAIL=your-email@gmail.com

# =============================================================================
# AUTHENTICATION & DATABASE (Multi-user support)
# =============================================================================

# PostgreSQL Database
POSTGRES_USER=pm_user
# SECURITY: REQUIRED - Must be changed! Minimum 16 characters recommended
# Generate with: openssl rand -base64 32
POSTGRES_PASSWORD=CHANGE_THIS_TO_STRONG_PASSWORD_MIN_16_CHARS

# Auth Service Configuration
# SECURITY: Will use POSTGRES_PASSWORD from above
DATABASE_URL=postgresql+asyncpg://pm_user:${POSTGRES_PASSWORD}@postgres:5432/pm_copilot

# SECURITY: REQUIRED - Must be changed! Minimum 32 characters
# Generate with: openssl rand -base64 48
AUTH_SECRET_KEY=CHANGE_THIS_SECRET_KEY_FOR_JWT_MINIMUM_32_CHARACTERS_REQUIRED

# SECURITY: REQUIRED - Must be changed! Minimum 32 characters
# Generate with: openssl rand -base64 48
CHAINLIT_AUTH_SECRET=CHANGE_THIS_CHAINLIT_SECRET_MINIMUM_32_CHARACTERS_REQUIRED

# OAuth Providers (Optional - leave empty to disable OAuth)
# Get credentials from:
# Google: https://console.cloud.google.com/apis/credentials
# GitHub: https://github.com/settings/developers
GOOGLE_OAUTH_CLIENT_ID=
GOOGLE_OAUTH_CLIENT_SECRET=
GITHUB_OAUTH_CLIENT_ID=
GITHUB_OAUTH_CLIENT_SECRET=

# Auth Service URL (used by web_chat)
AUTH_SERVICE_URL=http://auth-service:8003

# Server Configuration
SERVER_HOST=0.0.0.0
SERVER_PORT=8000

OPENAI_BASE_URL=https://foundation-models.api.cloud.ru/v1
OPENAI_API_KEY=your-openai-api-key
OPENAI_BASE_MODEL=openai/gpt-oss-120b

# Agent Settings (uses OPENAI_* vars above)
MAX_ITERATIONS=10
DEFAULT_PROJECT_KEY=PROJ
DEFAULT_SPRINT_NAME=Sprint 1

# Agent MCP Server Configuration
MCP_SERVER_URL=http://localhost:8000/mcp

# A2A Server Configuration
A2A_SERVER_HOST=0.0.0.0  # Use 0.0.0.0 for Docker, 127.0.0.1 for local-only
A2A_SERVER_PORT=8001
# CRITICAL: Use HTTPS in production! Change to your public domain:
A2A_SERVER_BASE_URL=https://agent.yourdomain.com  # NOT http://localhost:8001 in production!

# =============================================================================
# AGENT PERSISTENCE (AsyncPostgresSaver + ChatSession)
# =============================================================================

# Agent database for LangGraph checkpoints (psycopg format)
# Uses the same PostgreSQL database as auth_service
# SECURITY: Will use POSTGRES_PASSWORD from above
AGENT_DATABASE_URL=postgresql://pm_user:${POSTGRES_PASSWORD}@postgres:5432/pm_copilot

# Note: InMemoryTaskStore is used for A2A task metadata (ephemeral)
# For DatabaseTaskStore (persistent), install a2a-sdk[postgresql] and set:
# USE_DATABASE_TASK_STORE=true

# =============================================================================
# OBSERVABILITY & MONITORING (Optional)
# =============================================================================

# -----------------------------------------------------------------------------
# Production (Container Deployment) - Provided by Phoenix platform
# -----------------------------------------------------------------------------
# PHOENIX_PROJECT_NAME=your-project-id          # Auto-provided in container
# OTEL_ENDPOINT=http://otel-collector:4318      # Auto-provided in container
# ENABLE_PHOENIX=true                           # Auto-provided (default: true)
# ENABLE_MONITORING=true                        # Auto-provided (default: true)

# -----------------------------------------------------------------------------
# Local Development (Fallback variables)
# -----------------------------------------------------------------------------
# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# OpenTelemetry OTLP endpoint for local development
# Example: http://localhost:4318 for local Jaeger/OTEL Collector
# Leave empty to use console exporter (logs traces to stdout)
OTEL_EXPORTER_OTLP_ENDPOINT=

# Service name for local telemetry (fallback if PHOENIX_PROJECT_NAME not set)
OTEL_SERVICE_NAME=pm-mcp-server

# Enable telemetry for local development (uncomment to disable)
# ENABLE_PHOENIX=false
# ENABLE_MONITORING=false
